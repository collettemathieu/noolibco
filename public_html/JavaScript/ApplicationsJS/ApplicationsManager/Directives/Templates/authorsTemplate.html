<div class="modal-header">
	<button type="button" class="close" ng-click="close()">x</button>
	<h2 class="modal-title">Manage the contributors of {{application.nom}}</h2>
</div>
<div class="modal-body">
	<div class="container-fluid">
		<div class="row">
			<div class="col-lg-8 centering">
				<div class="alert alert-warning">
					<p>You can add contributors to help you in the developement of your application. The contributor needs to be registred on NooLib to modify the application online.</p>
				</div>
			</div>
			<div class="col-lg-8 centering">
				<legend>Add a new contributor</legend>
				<form class="well well-lg" ng-submit="validFormContributor()" name="formAddContributor">
					<div class="form-group has-feedback" ng-class="{'has-error':formAddContributor.firstname.$invalid && formAddContributor.firstname.$dirty, 'has-success':formAddContributor.firstname.$valid}">
						<input type="text" required class="form-control input-lg" name="firstname" ng-minlength="2" ng-model="firstname" placeholder="His(her) first name"/>
						<span ng-class="{'glyphicon form-control-feedback glyphicon-remove':formAddContributor.firstname.$invalid && formAddContributor.firstname.$dirty, 'glyphicon form-control-feedback glyphicon-ok':formAddContributor.firstname.$valid}"></span>
						<span ng-show="formAddContributor.firstname.$invalid && formAddContributor.firstname.$dirty" class="help-block">Enter a first name of at least two letters.</span>
					</div>
					<div class="form-group has-feedback" ng-class="{'has-error':formAddContributor.lastname.$invalid && formAddContributor.lastname.$dirty, 'has-success':formAddContributor.lastname.$valid}">
						<input type="text" required class="form-control input-lg" name="lastname" ng-minlength="2" ng-model="lastname" placeholder="His(her) last name"/>
						<span ng-class="{'glyphicon form-control-feedback glyphicon-remove':formAddContributor.lastname.$invalid && formAddContributor.lastname.$dirty, 'glyphicon form-control-feedback glyphicon-ok':formAddContributor.lastname.$valid}"></span>
						<span ng-show="formAddContributor.lastname.$invalid && formAddContributor.lastname.$dirty" class="help-block">Enter a last name of at least two letters.</span>
					</div>
					<div class="form-group has-feedback" ng-class="{'has-error':formAddContributor.mail.$invalid && formAddContributor.mail.$dirty, 'has-success':formAddContributor.mail.$valid}">
						<input type="email" required class="form-control input-lg" name="mail" ng-pattern="/^[a-zA-Z0-9._-]+@[a-z0-9._-]{2,}\.[a-z]{2,4}$/" ng-model="mail" placeholder= "His(her) email address"/>
						<span ng-class="{'glyphicon form-control-feedback glyphicon-remove':formAddContributor.mail.$invalid && formAddContributor.mail.$dirty, 'glyphicon form-control-feedback glyphicon-ok':formAddContributor.mail.$valid}"></span>
						<span ng-show="formAddContributor.mail.$invalid && formAddContributor.mail.$dirty" class="help-block">Enter a valid email address.</span>
					</div>
					<button ng-disabled="formAddContributor.$invalid" class="btn btn-primary" type="submit">
						<div ng-hide="displayButtonForm">Add this contributor</div>
						<div ng-show="displayButtonForm"><span class="glyphicon glyphicon-refresh spinning" ></span> Loading...</div>
					</button>
				</form>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-12">
				<ul class="list-unstyled">
					<?php foreach($authors as $auteur){?>
					<li>
						<div class="col-lg-5 auteur">
							<div class="col-lg-2">
								<form class="removeAuthor">
									<button type="submit" class="pull-right infoBulle btn btn-danger btn-margin btn-sm" title="Remove this author from the application"><i class="glyphicon glyphicon-remove"></i></button>
									<input type="hidden" name="idApplication" value="<?php echo $app->getIdApplication();?>"/>
									<input type="hidden" name="idAuteur" value="<?php echo $auteur->getIdAuteur(); ?>"/>
								</form>
							</div>
							<div class="col-lg-4">
								<img src="data:image/png;charset=utf8;base64,<?php echo base64_encode(file_get_contents($auteur->getUrlPhotoUtilisateur())); ?>"/>
							</div>
							<div class="col-lg-6">

								<?php if(!empty($auteur->getIdUtilisateur())){?>
								<a href="/Profile/idAuteur=<?php echo $auteur->getIdUtilisateur(); ?>">
									<?php echo $auteur->getNomUtilisateur().' '.$auteur->getPrenomUtilisateur(); ?>
								</a>
								<?php }else{ ?>
								<p><?php echo $auteur->getNomUtilisateur().' '.$auteur->getPrenomUtilisateur(); ?></p>
								<?php } ?>
								<p><?php if(!empty($auteur->getStatut())){echo $auteur->getStatut()->getNomStatut();}else{echo 'This author is not registered.';} ?></p>
								<p><?php if(!empty($auteur->getDateInscriptionUtilisateur())){echo 'member since '.$auteur->getDateInscriptionUtilisateur();} ?></p>
							</div>
							
						</div>
					</li>

					<?php } ?>
				</ul>
			</div>
		</div>
	</div>
</div>