/*! cornerstone - v0.8.4 - 2015-09-12 | (c) 2014 Chris Hafey | https://github.com/chafey/cornerstone */
"undefined"==typeof cornerstone&&(cornerstone={internal:{},rendering:{}}),function(d){function c(a){if(void 0===a){throw"disable: element element must not be undefined"}for(var h=d.getEnabledElements(),g=0;g<h.length;g++){if(h[g].element===a){var f={element:a};return $(a).trigger("CornerstoneElementDisabled",f),h[g].element.removeChild(h[g].canvas),void h.splice(g,1)}}}d.disable=c}(cornerstone),function(e,d){function f(r,q,p){if(void 0===r){throw"displayImage: parameter element cannot be undefined"}if(void 0===q){throw"displayImage: parameter image cannot be undefined"}var o=d.getEnabledElement(r);if(o.image=q,void 0===o.viewport&&(o.viewport=d.internal.getDefaultViewport(o.canvas,q)),p){for(var n in p){null!==p[n]&&(o.viewport[n]=p[n])}}var m,l=new Date;if(void 0!==o.lastImageTimeStamp){var b=l.getTime()-o.lastImageTimeStamp;m=(1000/b).toFixed()}o.lastImageTimeStamp=l.getTime();var a={viewport:o.viewport,element:o.element,image:o.image,enabledElement:o,frameRate:m};e(o.element).trigger("CornerstoneNewImage",a),d.updateImage(r)}d.displayImage=f}($,cornerstone),function(e,d){function f(b){var g=d.getEnabledElement(b);if(void 0===g.image){throw"draw: image has not been loaded yet"}d.drawImage(g)}d.draw=f}($,cornerstone),function(e,d){function f(){for(var b=d.getEnabledElements(),h=0;h<b.length;h++){var g=b[h];g.invalid===!0&&d.drawImage(g)}}d.drawInvalidated=f}($,cornerstone),function(d){function c(a){if(void 0===a){throw"enable: parameter element cannot be undefined"}var f=document.createElement("canvas");a.appendChild(f);var e={element:a,canvas:f,image:void 0,invalid:!1,data:{}};return d.addEnabledElement(e),d.resize(a,!0),a}d.enable=c}(cornerstone),function(e){function d(a,h){var g=e.getEnabledElement(a);return g.data.hasOwnProperty(h)===!1&&(g.data[h]={}),g.data[h]}function f(a,h){var g=e.getEnabledElement(a);delete g.data[h]}e.getElementData=d,e.removeElementData=f}(cornerstone),function(h){function g(d){if(void 0===d){throw"getEnabledElement: parameter element must not be undefined"}for(var c=0;c<i.length;c++){if(i[c].element==d){return i[c]}}throw"element not enabled"}function l(b){if(void 0===b){throw"getEnabledElement: enabledElement element must not be undefined"}i.push(b)}function k(d){var c=[];return i.forEach(function(a){a.image&&a.image.imageId===d&&c.push(a)}),c}function j(){return i}var i=[];h.getEnabledElement=g,h.addEnabledElement=l,h.getEnabledElementsByImageId=k,h.getEnabledElements=j}(cornerstone),function(e){function d(b){return 0===b.viewport.rotation||180===b.viewport.rotation?{width:b.image.width,height:b.image.height}:{width:b.image.height,height:b.image.width}}function f(j){var i=e.getEnabledElement(j),h=d(i),b=i.canvas.height/h.height,a=i.canvas.width/h.width;b>a?i.viewport.scale=a:i.viewport.scale=b,i.viewport.translation.x=0,i.viewport.translation.y=0,e.updateImage(j)}e.fitToWindow=f}(cornerstone),function(e,d){function f(b,i){var h=d.getEnabledElement(b),g=d.internal.getDefaultViewport(h.canvas,i);return g}d.getDefaultViewportForImage=f}($,cornerstone),function(e,d){function f(b){var g=d.getEnabledElement(b);return g.image}d.getImage=f}($,cornerstone),function(d){function c(r,q,p,o,n){var m=d.getStoredPixels(r,q,p,o,n),l=d.getEnabledElement(r),k=d.internal.getModalityLUT(l.image.slope,l.image.intercept,l.viewport.modalityLUT),a=m.map(k);return a}d.getPixels=c}(cornerstone),function(d){function c(x,w,v,u,t){if(void 0===x){throw"getStoredPixels: parameter element must not be undefined"}w=Math.round(w),v=Math.round(v);for(var s=d.getEnabledElement(x),r=[],q=0,p=s.image.getPixelData(),o=0;t>o;o++){for(var n=0;u>n;n++){var a=(o+v)*s.image.columns+(n+w);r[q++]=p[a]}}return r}d.getStoredPixels=c}(cornerstone),function(d){function c(a){var f=d.getEnabledElement(a),e=f.viewport;return void 0===e?void 0:{scale:e.scale,translation:{x:e.translation.x,y:e.translation.y},voi:{windowWidth:e.voi.windowWidth,windowCenter:e.voi.windowCenter},invert:e.invert,pixelReplication:e.pixelReplication,rotation:e.rotation,hflip:e.hflip,vflip:e.vflip,modalityLUT:e.modalityLUT,voiLUT:e.voiLUT}}d.getViewport=c}(cornerstone),function(x){function w(b){if(void 0===b){throw"setMaximumSizeBytes: parameter numBytes must not be undefined"}if(void 0===b.toFixed){throw"setMaximumSizeBytes: parameter numBytes must be a number"}n=b,v()}function v(){function a(d,c){return d.timeStamp>c.timeStamp?-1:d.timeStamp<c.timeStamp?1:0}if(!(n>=m)){for(o.sort(a);m>n;){var f=o[o.length-1];m-=f.sizeInBytes,delete p[f.imageId],f.imagePromise.reject(),o.pop(),$(x).trigger("CornerstoneImageCachePromiseRemoved",{imageId:f.imageId})}var e=x.imageCache.getCacheInfo();$(x).trigger("CornerstoneImageCacheFull",e)}}function u(e,c){if(void 0===e){throw"getImagePromise: imageId must not be undefined"}if(void 0===c){throw"getImagePromise: imagePromise must not be undefined"}if(p.hasOwnProperty(e)===!0){throw"putImagePromise: imageId already in cache"
}var f={loaded:!1,imageId:e,imagePromise:c,timeStamp:new Date,sizeInBytes:0};p[e]=f,o.push(f),c.then(function(b){if(f.loaded=!0,void 0===b.sizeInBytes){throw"putImagePromise: image does not have sizeInBytes property or"}if(void 0===b.sizeInBytes.toFixed){throw"putImagePromise: image.sizeInBytes is not a number"}f.sizeInBytes=b.sizeInBytes,m+=f.sizeInBytes,v()})}function t(d){if(void 0===d){throw"getImagePromise: imageId must not be undefined"}var c=p[d];return void 0===c?void 0:(c.timeStamp=new Date,c.imagePromise)}function s(d){if(void 0===d){throw"removeImagePromise: imageId must not be undefined"}var c=p[d];if(void 0===c){throw"removeImagePromise: imageId must not be undefined"}return o.splice(o.indexOf(c),1),m-=c.sizeInBytes,delete p[d],c.imagePromise}function r(){return{maximumSizeInBytes:n,cacheSizeInBytes:m,numberOfImagesCached:o.length}}function q(){for(;o.length>0;){var b=o.pop();delete p[b.imageId],b.imagePromise.reject()}m=0}var p={},o=[],n=1073741824,m=0;x.imageCache={putImagePromise:u,getImagePromise:t,removeImagePromise:s,setMaximumSizeBytes:w,getCacheInfo:r,purgeCache:q,cachedImages:o}}(cornerstone),function(r,q){function p(s){var i,h=s.indexOf(":"),b=s.substring(0,h),a=j[b];return void 0===a||null===a?void 0!==k?i=k(s):void 0:(i=a(s),i.then(function(d){r(q).trigger("CornerstoneImageLoaded",{image:d})}),i)}function o(b){if(void 0===b){throw"loadImage: parameter imageId must not be undefined"}var c=q.imageCache.getImagePromise(b);if(void 0!==c){return c}if(c=p(b),void 0===c){throw"loadImage: no image loader for imageId"}return c}function n(b){if(void 0===b){throw"loadAndCacheImage: parameter imageId must not be undefined"}var c=q.imageCache.getImagePromise(b);if(void 0!==c){return c}if(c=p(b),void 0===c){throw"loadAndCacheImage: no image loader for imageId"}return q.imageCache.putImagePromise(b,c),c}function m(d,c){j[d]=c}function l(d){var c=k;return k=d,c}var k,j={};q.loadImage=o,q.loadAndCacheImage=n,q.registerImageLoader=m,q.registerUnknownImageLoader=l}($,cornerstone),function(d){function c(a,l){var k=new d.internal.Transform;k.translate(a.canvas.width/2,a.canvas.height/2);var j=a.viewport.rotation;0!==j&&k.rotate(j*Math.PI/180);var i=a.viewport.scale,h=a.viewport.scale;return a.image.rowPixelSpacing<a.image.columnPixelSpacing?i*=a.image.columnPixelSpacing/a.image.rowPixelSpacing:a.image.columnPixelSpacing<a.image.rowPixelSpacing&&(h*=a.image.rowPixelSpacing/a.image.columnPixelSpacing),k.scale(i,h),0!==j&&k.rotate(-j*Math.PI/180),k.translate(a.viewport.translation.x,a.viewport.translation.y),0!==j&&k.rotate(j*Math.PI/180),void 0!==l&&k.scale(l,l),a.viewport.hflip&&k.scale(-1,1),a.viewport.vflip&&k.scale(1,-1),k.translate(-a.image.width/2,-a.image.height/2),k}d.internal.calculateTransform=c}(cornerstone),function(e,d){function f(a,n){var m=new Date;a.image.render(a,n);var l=a.canvas.getContext("2d"),k=new Date,j=k-m,i={viewport:a.viewport,element:a.element,image:a.image,enabledElement:a,canvasContext:l,renderTimeInMs:j};e(a.element).trigger("CornerstoneImageRendered",i),a.invalid=!1}d.internal.drawImage=f,d.drawImage=f}($,cornerstone),function(e){function d(F,E,D,C,B,A){void 0===F.lut&&(F.lut=new Int16Array(F.maxPixelValue-Math.min(F.minPixelValue,0)+1));var z=F.lut,y=F.maxPixelValue,x=F.minPixelValue,w=e.internal.getModalityLUT(F.slope,F.intercept,B),v=e.internal.getVOILUT(E,D,A),u=0;0>x&&(u=x);var t,s,r,a;for(t=F.minPixelValue;y>=t;t++){s=w(t),r=v(s),a=Math.min(Math.max(r,0),255),C?z[t+-u]=Math.round(255-a):z[t+-u]=Math.round(a)}return z}function f(J,I,H,G,F,E){if(F||E){return d(J,I,H,G,F,E)}void 0===J.lut&&(J.lut=new Int16Array(J.maxPixelValue-Math.min(J.minPixelValue,0)+1));var D,C,B,A,z=J.lut,y=J.maxPixelValue,x=J.minPixelValue,w=J.slope,v=J.intercept,u=I,t=H,b=0;if(0>x&&(b=x),G===!0){for(A=J.minPixelValue;y>=A;A++){D=A*w+v,C=255*((D-t)/u+0.5),B=Math.min(Math.max(C,0),255),z[A+-b]=Math.round(255-B)}}else{for(A=J.minPixelValue;y>=A;A++){D=A*w+v,C=255*((D-t)/u+0.5),B=Math.min(Math.max(C,0),255),z[A+-b]=Math.round(B)}}}e.internal.generateLutNew=d,e.internal.generateLut=f,e.generateLutNew=d,e.generateLut=f}(cornerstone),function(d){function c(g,f){if(void 0===g){throw"getDefaultViewport: parameter canvas must not be undefined"}if(void 0===f){throw"getDefaultViewport: parameter image must not be undefined"}var j={scale:1,translation:{x:0,y:0},voi:{windowWidth:f.windowWidth,windowCenter:f.windowCenter},invert:f.invert,pixelReplication:!1,rotation:0,hflip:!1,vflip:!1,modalityLUT:f.modalityLUT,voiLUT:f.voiLUT},i=g.height/f.rows,h=g.width/f.columns;return i>h?j.scale=h:j.scale=i,j}d.internal.getDefaultViewport=c,d.getDefaultViewport=c}(cornerstone),function(d){function c(a){var e=d.internal.calculateTransform(a);return e}d.internal.getTransform=c}(cornerstone),function(d,c){c.drawImage=c.internal.drawImage,c.generateLut=c.internal.generateLut,c.storedPixelDataToCanvasImageData=c.internal.storedPixelDataToCanvasImageData,c.storedColorPixelDataToCanvasImageData=c.internal.storedColorPixelDataToCanvasImageData
}($,cornerstone),function(f){function e(j,i){var l=j,k=i;return function(b){return b*l+k}}function h(j){var i=j.lut[0],l=j.lut[j.lut.length-1],k=j.firstValueMapped+j.lut.length;return function(a){return a<j.firstValueMapped?i:a>=k?l:j.lut[a]}}function g(b,i,c){return c?h(c):e(b,i)}f.internal.getModalityLUT=g}(cornerstone),function(d){function c(t,s,r){var q=t.minPixelValue,p=0,o=0,n=t.width*t.height*4,m=t.getPixelData(),l=s,k=r;if(0>q){for(;n>o;){k[p++]=l[m[o++]+-q],k[p++]=l[m[o++]+-q],k[p]=l[m[o]+-q],o+=2,p+=2}}else{for(;n>o;){k[p++]=l[m[o++]],k[p++]=l[m[o++]],k[p]=l[m[o]],o+=2,p+=2}}}d.internal.storedColorPixelDataToCanvasImageData=c,d.storedColorPixelDataToCanvasImageData=c}(cornerstone),function(d){function c(v,u,t){var s=v.getPixelData(),r=v.minPixelValue,q=3,p=0,o=s.length,n=s,m=u,l=t;if(0>r){for(;o>p;){l[q]=m[n[p++]+-r],q+=4}}else{for(;o>p;){l[q]=m[n[p++]],q+=4}}}d.internal.storedPixelDataToCanvasImageData=c,d.storedPixelDataToCanvasImageData=c}(cornerstone),function(d){function c(){this.reset()}c.prototype.reset=function(){this.m=[1,0,0,1,0,0]},c.prototype.clone=function(){var b=new c;return b.m[0]=this.m[0],b.m[1]=this.m[1],b.m[2]=this.m[2],b.m[3]=this.m[3],b.m[4]=this.m[4],b.m[5]=this.m[5],b},c.prototype.multiply=function(i){var h=this.m[0]*i.m[0]+this.m[2]*i.m[1],n=this.m[1]*i.m[0]+this.m[3]*i.m[1],m=this.m[0]*i.m[2]+this.m[2]*i.m[3],l=this.m[1]*i.m[2]+this.m[3]*i.m[3],k=this.m[0]*i.m[4]+this.m[2]*i.m[5]+this.m[4],j=this.m[1]*i.m[4]+this.m[3]*i.m[5]+this.m[5];this.m[0]=h,this.m[1]=n,this.m[2]=m,this.m[3]=l,this.m[4]=k,this.m[5]=j},c.prototype.invert=function(){var i=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),h=this.m[3]*i,n=-this.m[1]*i,m=-this.m[2]*i,l=this.m[0]*i,k=i*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),j=i*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=h,this.m[1]=n,this.m[2]=m,this.m[3]=l,this.m[4]=k,this.m[5]=j},c.prototype.rotate=function(i){var h=Math.cos(i),n=Math.sin(i),m=this.m[0]*h+this.m[2]*n,l=this.m[1]*h+this.m[3]*n,k=this.m[0]*-n+this.m[2]*h,j=this.m[1]*-n+this.m[3]*h;this.m[0]=m,this.m[1]=l,this.m[2]=k,this.m[3]=j},c.prototype.translate=function(f,e){this.m[4]+=this.m[0]*f+this.m[2]*e,this.m[5]+=this.m[1]*f+this.m[3]*e},c.prototype.scale=function(f,e){this.m[0]*=f,this.m[1]*=f,this.m[2]*=e,this.m[3]*=e},c.prototype.transformPoint=function(f,e){var h=f,g=e;return f=h*this.m[0]+g*this.m[2]+this.m[4],e=h*this.m[1]+g*this.m[3]+this.m[5],{x:f,y:e}},d.internal.Transform=c}(cornerstone),function(f){function e(d,c){return function(a){return 255*((a-c)/d+0.5)}}function h(j){var i=j.numBitsPerEntry-8,m=j.lut[0]>>i,l=j.lut[j.lut.length-1]>>i,k=j.firstValueMapped+j.lut.length-1;return function(a){return a<j.firstValueMapped?m:a>=k?l:j.lut[a-j.firstValueMapped]>>i}}function g(b,i,c){return c?h(c):e(b,i)}f.internal.getVOILUT=g}(cornerstone),function(d){function c(a){var f=d.getEnabledElement(a);f.invalid=!0;var e={element:a};$(f.element).trigger("CornerstoneInvalidated",e)}d.invalidate=c}(cornerstone),function(d){function c(a){var e=d.getEnabledElementsByImageId(a);e.forEach(function(f){d.drawImage(f,!0)})}d.invalidateImageId=c}(cornerstone),function(d){function c(r,q,p){var o=d.getEnabledElement(r);if(void 0===o.image){throw"image has not been loaded yet"}var n=(o.image,r.getBoundingClientRect()),m=q-n.left-window.pageXOffset,l=p-n.top-window.pageYOffset,k={x:m,y:l},a=d.internal.getTransform(o);return a.invert(),a.transformPoint(k.x,k.y)}d.pageToPixel=c}(cornerstone),function(d){function c(a,h){var g=d.getEnabledElement(a),f=d.internal.getTransform(g);return f.transformPoint(h.x,h.y)}d.pixelToCanvas=c}(cornerstone),function(v){function u(b){m.width=b.width,m.height=b.height,p=m.getContext("2d"),p.fillStyle="white",p.fillRect(0,0,m.width,m.height),o=p.getImageData(0,0,b.width,b.height)}function t(a,d){return void 0!==a.lut&&a.lut.windowCenter===d.voi.windowCenter&&a.lut.windowWidth===d.voi.windowWidth&&a.lut.invert===d.invert?a.lut:(v.generateLut(a,d.voi.windowWidth,d.voi.windowCenter,d.invert),a.lut.windowWidth=d.voi.windowWidth,a.lut.windowCenter=d.voi.windowCenter,a.lut.invert=d.invert,a.lut)}function s(d,c){return c.imageId!==n||l.windowCenter!==d.viewport.voi.windowCenter||l.windowWidth!==d.viewport.voi.windowWidth||l.invert!==d.viewport.invert||l.rotation!==d.viewport.rotation||l.hflip!==d.viewport.hflip||l.vflip!==d.viewport.vflip?!0:!1}function r(d,c,b){if(d.viewport.voi.windowWidth===d.image.windowWidth&&d.viewport.voi.windowCenter===d.image.windowCenter&&d.viewport.invert===!1){return c.getCanvas()}if(s(d,c)===!1&&b!==!0){return m}(m.width!==c.width||m.height!=c.height)&&u(c);var a=t(c,d.viewport);return v.storedColorPixelDataToCanvasImageData(c,a,o.data),p.putImageData(o,0,0),m}function q(a,j){if(void 0===a){throw"drawImage: enabledElement parameter must not be undefined"}var i=a.image;if(void 0===i){throw"drawImage: image must be loaded before it can be drawn"}var h=a.canvas.getContext("2d");h.setTransform(1,0,0,1,0,0),h.fillStyle="black",h.fillRect(0,0,a.canvas.width,a.canvas.height),a.viewport.pixelReplication===!0?(h.imageSmoothingEnabled=!1,h.mozImageSmoothingEnabled=!1):(h.imageSmoothingEnabled=!0,h.mozImageSmoothingEnabled=!0),h.save(),v.setToPixelCoordinateSystem(a,h);
var e=r(a,i,j);h.drawImage(e,0,0,i.width,i.height,0,0,i.width,i.height),h.restore(),n=i.imageId,l.windowCenter=a.viewport.voi.windowCenter,l.windowWidth=a.viewport.voi.windowWidth,l.invert=a.viewport.invert,l.rotation=a.viewport.rotation,l.hflip=a.viewport.hflip,l.vflip=a.viewport.vflip}var p,o,n,m=document.createElement("canvas"),l={};v.rendering.colorImage=q,v.renderColorImage=q}(cornerstone),function(x){function w(b){n.width=b.width,n.height=b.height,q=n.getContext("2d"),q.fillStyle="white",q.fillRect(0,0,n.width,n.height),p=q.getImageData(0,0,b.width,b.height)}function v(d,c){return d||c?d&&c?d.id!==c.id:!1:!0}function u(a,f,c){return void 0!==a.lut&&a.lut.windowCenter===f.voi.windowCenter&&a.lut.windowWidth===f.voi.windowWidth&&v(a.lut.modalityLUT,f.modalityLUT)&&v(a.lut.voiLUT,f.voiLUT)&&a.lut.invert===f.invert&&c!==!0?a.lut:(x.generateLut(a,f.voi.windowWidth,f.voi.windowCenter,f.invert,f.modalityLUT,f.voiLUT),a.lut.windowWidth=f.voi.windowWidth,a.lut.windowCenter=f.voi.windowCenter,a.lut.invert=f.invert,a.lut.voiLUT=f.voiLUT,a.lut.modalityLUT=f.modalityLUT,a.lut)}function t(d,c){return c.imageId!==o||m.windowCenter!==d.viewport.voi.windowCenter||m.windowWidth!==d.viewport.voi.windowWidth||m.invert!==d.viewport.invert||m.rotation!==d.viewport.rotation||m.hflip!==d.viewport.hflip||m.vflip!==d.viewport.vflip||m.modalityLUT!==d.viewport.modalityLUT||m.voiLUT!==d.viewport.voiLUT?!0:!1}function s(e,d,b){if(t(e,d)===!1&&b!==!0){return n}(n.width!==d.width||n.height!=d.height)&&w(d);var a=u(d,e.viewport,b);return x.storedPixelDataToCanvasImageData(d,a,p.data),q.putImageData(p,0,0),n}function r(a,j){if(void 0===a){throw"drawImage: enabledElement parameter must not be undefined"}var i=a.image;if(void 0===i){throw"drawImage: image must be loaded before it can be drawn"}var h=a.canvas.getContext("2d");h.setTransform(1,0,0,1,0,0),h.fillStyle="black",h.fillRect(0,0,a.canvas.width,a.canvas.height),a.viewport.pixelReplication===!0?(h.imageSmoothingEnabled=!1,h.mozImageSmoothingEnabled=!1):(h.imageSmoothingEnabled=!0,h.mozImageSmoothingEnabled=!0),x.setToPixelCoordinateSystem(a,h);var f=s(a,i,j);h.drawImage(f,0,0,i.width,i.height,0,0,i.width,i.height),o=i.imageId,m.windowCenter=a.viewport.voi.windowCenter,m.windowWidth=a.viewport.voi.windowWidth,m.invert=a.viewport.invert,m.rotation=a.viewport.rotation,m.hflip=a.viewport.hflip,m.vflip=a.viewport.vflip,m.modalityLUT=a.viewport.modalityLUT,m.voiLUT=a.viewport.voiLUT}var q,p,o,n=document.createElement("canvas"),m={};x.rendering.grayscaleImage=r,x.renderGrayscaleImage=r}(cornerstone),function(d){function c(a,h){if(void 0===a){throw"drawImage: enabledElement parameter must not be undefined"}var g=a.image;if(void 0===g){throw"drawImage: image must be loaded before it can be drawn"}var f=a.canvas.getContext("2d");f.setTransform(1,0,0,1,0,0),f.fillStyle="black",f.fillRect(0,0,a.canvas.width,a.canvas.height),a.viewport.pixelReplication===!0?(f.imageSmoothingEnabled=!1,f.mozImageSmoothingEnabled=!1):(f.imageSmoothingEnabled=!0,f.mozImageSmoothingEnabled=!0),d.setToPixelCoordinateSystem(a,f),a.viewport.voi.windowWidth===a.image.windowWidth&&a.viewport.voi.windowCenter===a.image.windowCenter&&a.viewport.invert===!1?f.drawImage(g.getImage(),0,0,g.width,g.height,0,0,g.width,g.height):d.renderColorImage(a,h)}d.rendering.webImage=c,d.renderWebImage=c}(cornerstone),function(d){function c(a){var f=d.getEnabledElement(a),e=d.internal.getDefaultViewport(f.canvas,f.image);f.viewport=e,d.updateImage(a)}d.reset=c}(cornerstone),function(e){function d(g,c){c.width=g.clientWidth,c.height=g.clientHeight,c.style.width=g.clientWidth+"px",c.style.height=g.clientHeight+"px"}function f(g,b){var a=e.getEnabledElement(g);d(g,a.canvas),void 0!==a.image&&(b===!0?e.fitToWindow(g):e.updateImage(g))}e.resize=f}(cornerstone),function(d){function c(a,h,g){if(void 0===a){throw"setToPixelCoordinateSystem: parameter enabledElement must not be undefined"}if(void 0===h){throw"setToPixelCoordinateSystem: parameter context must not be undefined"}var f=d.internal.calculateTransform(a,g);h.setTransform(f.m[0],f.m[1],f.m[2],f.m[3],f.m[4],f.m[5],f.m[6])}d.setToPixelCoordinateSystem=c}(cornerstone),function(d){function c(a,f){var e=d.getEnabledElement(a);e.viewport.scale=f.scale,e.viewport.translation.x=f.translation.x,e.viewport.translation.y=f.translation.y,e.viewport.voi.windowWidth=f.voi.windowWidth,e.viewport.voi.windowCenter=f.voi.windowCenter,e.viewport.invert=f.invert,e.viewport.pixelReplication=f.pixelReplication,e.viewport.rotation=f.rotation,e.viewport.hflip=f.hflip,e.viewport.vflip=f.vflip,e.viewport.modalityLUT=f.modalityLUT,e.viewport.voiLUT=f.voiLUT,e.viewport.voi.windowWidth<0.000001&&(e.viewport.voi.windowWidth=0.000001),e.viewport.scale<0.0001&&(e.viewport.scale=0.25),(360===e.viewport.rotation||-360===e.viewport.rotation)&&(e.viewport.rotation=0),d.updateImage(a)}d.setViewport=c}(cornerstone),function(d){function c(a,f){var e=d.getEnabledElement(a);if(void 0===e.image){throw"updateImage: image has not been loaded yet"
}d.drawImage(e,f)}d.updateImage=c}(cornerstone);