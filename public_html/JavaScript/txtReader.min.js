var allowedTableType=["csv"],allowedTextType=["txt"];function TXTFile(b,a){this.donnees=[];if(typeof(b)!=="undefined"&&typeof(a)!=="undefined"){if(allowedTextType.indexOf(a)!=-1){this.donnees=this.set_data_from_txt(b)}else{if(allowedTableType.indexOf(a)!=-1){this.donnees=this.set_data_from_csv(b)}}this.numberOfSignals=this.donnees[0].length;this.sizeData=this.donnees.length-1;this.step=Math.round(this.sizeData/1000);if(this.step<1){this.step=1}}this.series=[];this.serieNavigator=[];this.sampleRate=1}TXTFile.prototype.get_name=function(){return"TXTFile"};TXTFile.prototype.get_legend=function(){return this.donnees[0]};TXTFile.prototype.set_legend=function(a){if(Array.isArray(a)){this.donnees[0]=a}else{console.log("TXTFile::array_legend is not an array.")}};TXTFile.prototype.get_series=function(a){if(typeof a==="number"){return this.series[a]}else{return this.series}};TXTFile.prototype.set_series=function(a){if(Array.isArray(a)){this.series=a;this.sizeData=this.series[0].length}else{console.log("TXTFile::array_series is not an array.")}};TXTFile.prototype.construct_from_data=function(f,g,l,k){if(Array.isArray(g)&&Array.isArray(f)){var d=[],e=g.length;this.set_legend(f);for(var a=0,h=g[0].length;a<h;++a){for(var b=0;b<e;++b){d.push(g[b][a])}this.donnees.push(d);d=[]}this.sizeData=this.donnees.length-1;this.numberOfSignals=g.length;if(typeof(k)!=="undefined"){k=parseFloat(k);this.sampleRate=k}this.step=Math.round(this.sizeData/1000);if(this.step<1){this.step=1}this.get_view_signals_data(l)}else{console.log("TXTFile::array_legend or array_data is not an array.")}};TXTFile.prototype.get_navigator=function(){return this.serieNavigator};TXTFile.prototype.get_sample_rate=function(){return this.sampleRate};TXTFile.prototype.get_limit_points_display=function(){return 100000};TXTFile.prototype.get_number_of_signals=function(){return this.numberOfSignals};TXTFile.prototype.get_size_signals=function(){return this.sizeData};TXTFile.prototype.set_data_from_txt=function(n){var b=false,j=0,e=[],f=[],m=/(.+)/g,h;while(h=m.exec(n)){if(!b){if(j<20){e[j]=h[0].split(/[;,\t]/);++j}else{var g=e.length-1;while(!b&&g>=0){if(isNaN(parseFloat(e[g][0]))){b=true;if(e[g].length!=e[g+1].length){var a=[];for(var d=0,l=e[g+1].length;d<l;++d){a[d]="No title "+d}f.push(a);for(var d=g+1,l=e.length;d<l;++d){f.push(e[d])}}else{for(var d=g,l=e.length;d<l;++d){f.push(e[d])}}}else{g=g-1}}if(!b){b=true;var a=[];for(var d=0,l=e[0].length;d<l;++d){a[d]="No title "+d}f.push(a);for(var d=0,l=e.length;d<l;++d){f.push(e[d])}}}}else{f.push(h[0].split(/[;,\t]/))}}return f};TXTFile.prototype.set_data_from_csv=function(g){var f=[],c=/(.+)/,g=g.replace(/;;/g,""),g=g.replace(/,,/g,""),g=g.replace(/\.\./g,""),e=new String(c.exec(g)),d=e[e.length-1],b=/(.+)/g,a;if(/[0-9]+,[0-9]+[;\t]/.test(g)){g=g.replace(/,/g,".")}if(d===","||d===";"||d==="."){while(a=b.exec(g)){f.push(a[0].slice(0,-1).split(/[;,\t]/))}}else{while(a=b.exec(g)){f.push(a[0].split(/[;,\t]/))}}return f};TXTFile.prototype.get_all_signals_data=function(e,a){var b=0;this.series=[];for(var d=0;d<this.numberOfSignals;++d){this.series[d]=[]}for(var c=e+1;c<a;++c){for(var d=0;d<this.numberOfSignals;++d){this.series[d][b]=[((c-1)/this.sampleRate)*1000*this.sampleRate,parseFloat(this.donnees[c][d])]}++b}return this.series};TXTFile.prototype.get_view_signals_data=function(b){var a=0;this.series=[];for(var d=0;d<this.numberOfSignals;++d){this.series[d]=[]}for(var c=1;c<this.sizeData+1;++c){if(c<b){for(var d=0;d<this.numberOfSignals;++d){this.series[d][c-1]=[((c-1)/this.sampleRate)*1000*this.sampleRate,parseFloat(this.donnees[c][d])]}}if((c-1)%this.step==0){this.serieNavigator[a]=[((c-1)/this.sampleRate)*1000*this.sampleRate,parseFloat(this.donnees[c][0])];++a}}};